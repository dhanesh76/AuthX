<!DOCTYPE html>
<html>
<head>
    <title>Sign in</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;background:#f6f8fa;}
        .card{width:320px;margin:80px auto;padding:20px;border:1px solid #d0d7de;border-radius:6px;background:white;}
        h2{text-align:center;font-weight:600;}
        input{width:100%;padding:8px;margin:6px 0;border:1px solid #d0d7de;border-radius:6px;font-size:14px;}
        button{width:100%;padding:8px;background:#2da44e;color:white;border:none;border-radius:6px;margin-top:10px;}
        .small{text-align:center;margin-top:12px;font-size:13px;}
        .divider{text-align:center;margin:12px 0;color:#57606a;font-size:12px;}
        .oauth-btn{width:100%;padding:8px;border-radius:6px;margin-top:6px;border:1px solid #d0d7de;}
    </style>
</head>
<body>

<div class="card">
    <h2>Sign in to Auth</h2>

    <form id="loginForm">
        <label>Email</label>
        <input id="email" required>

        <label>Password</label>
        <input type="password" id="password" required>

        <button>Sign in</button>
    </form>

    <div class="divider">or</div>

    <a href="/oauth2/authorization/google"><button class="oauth-btn">Sign in with Google</button></a>
    <a href="/oauth2/authorization/github"><button class="oauth-btn">Sign in with GitHub</button></a>

    <div class="small">
        <a href="/forgot-password">Forgot password?</a><br>
        New here? <a href="/register">Create account</a>
    </div>

    <p id="msg" style="color:red;text-align:center;"></p>
</div>

<script>
    loginForm.onsubmit = async e=>{
        e.preventDefault();
        const res = await fetch("/api/auth/login",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({username:email.value,password:password.value})
        });
        const data=await res.json();
        if(res.ok){
            sessionStorage.setItem("jwt",data.accessToken);
            window.location="/dashboard";
        }else msg.innerText=data.message;
    };
</script>

</body>
</html>
